{
	"name": "DaRT_API_Query",
	"properties": {
		"folder": {
			"name": "DaRT"
		},
		"content": {
			"query": "-- Initial query which needs expanding and testing\n-- SELECT \n--                 t1.EventID,\n--                 t1.EventType,\n--                 t1.StartDateOfEvent,\n--                 t2.AppealRefNumber,\n--                 t3.SiteAddress1\n                \n-- FROM            casework_event_fact t1\n-- INNER JOIN      casework_event_dim t2 \n-- ON              t1.EventID = t2.EventID\n-- INNER JOIN      casework_case_fact t3\n-- ON              t2.CaseReference = t3.CaseReference\n\n\nUSE ODW_HARMONISED_DB\n\nSELECT      \n                    TOP 5\n                    t1.CaseReference,\n                    t1.AppealRefNumber,\n                    -- t2.[Type] as \"tpo Type\",\n                    -- t4.[Type] as \"high hedges type\", -- multiple tables\n                    -- COALESCE(t2.[Procedure], t3.[Procedure]) as \"Procedure\", -- multiple tables\n                    t1.validity,\n                    t5.ProcessingState,\n                    t6.LinkedAppeal,\n                    t7.LPACode,\n                    t7.LPAName,\n                    t6.Jurisdiction,\n                    t5.DevelopmentOrAllegation,\n                    t5.CaseProcess,\n                    t6.DevelopmentType\n\nFROM                casework_case_info_dim t1\n-- LEFT OUTER JOIN     casework_tpo_dim t2\n-- ON                  t1.AppealRefNumber = t2.AppealReferenceNumber   \n-- LEFT OUTER JOIN     high_court_dim t3 \n-- ON                  t1.AppealRefNumber = t3.AppealRefNumber\n-- LEFT OUTER JOIN     casework_high_hedges_dim t4\n-- ON                  t1.AppealRefNumber = t4.AppealRefNumber\nLEFT OUTER JOIN     casework_all_appeals_additional_data_dim t5\nON                  t1.AppealRefNumber = t5.AppealRefNumber\nLEFT OUTER JOIN     casework_all_appeals_dim t6\nON                  t1.AppealRefNumber = t6.AppealRefNumber\nLEFT OUTER JOIN     casework_lpa_responsibility_dim t7\nON                  t6.LPAID = t7.LPAID\n\n-- WHERE               t1.AppealRefNumber = '2002510'\n",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "odw_harmonised_db",
				"poolName": "Built-in"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}