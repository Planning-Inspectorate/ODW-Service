{
	"name": "IMS InformationAsset",
	"properties": {
		"description": "IMS Information Asset curated view for PBI reports",
		"content": {
			"query": "\n IF NOT EXISTS ( SELECT  *\n                 FROM    sys.schemas\n                 WHERE   name = 'miPINS' )\n     EXEC('CREATE SCHEMA [miPINS]');\n GO\n\n --CREATE VIEW FOR IMS Information Asset PBI Report\n\n CREATE OR ALTER VIEW miPINS.vw_mipins_IMS_InformationAsset\n AS\n\n SELECT\n\tIMSInformationAssetID                                                                AS [information_asset_id],\n\tINformationAssetIDLegacy                                                             AS [information_asset_parent_id],\n\tInformationAssetName                                                                 AS [information_asset_name],\n\tInformationAssetPrimaryBusinessArea                                                  AS [primary_business_area],\n\tInformationAssetLocation                                                             AS [location],\n\tInformationAssetContractedService                                                    AS [is_contracted_service],\n\tInformationAssetRegion                                                               AS [region],\n\tInformationAssetPurpose                                                              AS [purpose],\n\tInformationAssetFinancialValue                                                       AS [financial_value],\n\tInformationAssetBusinessCritically                                                   AS [business_criticality],\n\tInformationAssetDataDisposalRoutine                                                  AS [data_disposal_routine],\n\tInformationAssetDataLastCurrentAccurateDate                                          AS [last_current_and_accurate_date],\n\tInformationAssetReviewPeriod                                                         AS [review_period_days],\n\tInformationAssetUserLicenses                                                         AS [user_licences],\n\tInformationAssetSuperUserLicenses                                                    AS [superuser_licences],\n\tInformationAssetSysAdminLicenses                                                     AS [sys_admin_licences],\n\tInformationAssetInfoSecRiskRegister                                                  AS [infosec_risk_register],\n\tInformationAssetCustodian                                                            AS [custodian],\n\ti.[date_of_last_dr_check],\n\tisnull(load.get_ims_display_name(i.[backup_location]), i.[backup_location]) as backup_location,\n\tisnull(load.get_ims_display_name(i.[dr_check_frequency]), i.[dr_check_frequency]) as dr_check_frequency,\n\tisnull(load.get_ims_display_name(i.[backup_frequency]),i.[backup_frequency]) as backup_frequency,\n\tisnull(load.get_ims_display_name(i.[asset_format_list_c]),i.[asset_format_list_c]) as asset_format_list_c,\n\ti.[management_register_text_c] as management_register_text,\n\ti.[software_version],\n\tisnull(load.get_ims_display_name(i.[access_control_method]),i.[access_control_method]) as access_control_method,\n\tisnull(load.get_ims_display_name(i.[backup_required]), i.[backup_required]) as backup_required,\n\ti.[decommision_date] as decommision_date,\n\tisnull(load.get_ims_display_name(i.[dr_test_required]), i.[dr_test_required]) as dr_test_required,\n\tisnull(load.get_ims_display_name(i.[encryption_at_rest]), i.[encryption_at_rest]) as [encryption_at_rest],\n\ti.[ims_information_assets_ims_information_assets_1_name],\n\ti.[ims_inform2f55_assets_ida],\n\tisnull(load.get_ims_display_name(i.[status]), i.[status]) as [status],\n\ti.date_modified,\n\ti.[date_of_next_review_c] as [date_of_next_review],\n\treplace(i.[owner_c], '&#039;', '''') as [product_manager_or_business_owner],\n\ti.[risk_assessment_type_c] as [risk_assessment_type],\n\ti.[link_to_risk_assessment_c] as [link_to_risk_assessment]\n\nFROM [odw_harmonised_db].[dbo].[ims_information_asset_dim]\n    \n\t\t\n\nGO",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "master",
				"poolName": "Built-in"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}