{
	"name": "ims_create_external_tables",
	"properties": {
		"content": {
			"query": "-- v_bdc_attribute\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_bdc_attribute')\n\tCREATE EXTERNAL TABLE v_bdc_attribute (\n\t\t[attribute_id] nvarchar(4000),\n\t\t[attribute_name] nvarchar(4000),\n\t\t[is_personal_data] nvarchar(4000),\n\t\t[minimise_after_processing] nvarchar(4000),\n\t\t[is_this_special_category_data] nvarchar(4000),\n\t\t[retention_period] nvarchar(4000),\n\t\t[attribute_information_owner] nvarchar(4000),\n\t\t[type] nvarchar(4000),\n\t\t[status] nvarchar(4000),\n\t\t[priority] nvarchar(4000),\n\t\t[resolution] nvarchar(4000),\n\t\t[work_log] nvarchar(4000),\n\t\t[fk_entity_id] nvarchar(4000),\n\t\t[date_modified] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_bdc_attribute.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n-- v_bdc_entity\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_bdc_entity')\n\tCREATE EXTERNAL TABLE v_bdc_entity (\n\t\t[entity_id] nvarchar(4000),\n\t\t[entity_name] nvarchar(4000),\n\t\t[business_area] nvarchar(4000),\n\t\t[entity_information_owner] nvarchar(4000),\n\t\t[entity_information_expert] nvarchar(4000),\n\t\t[type] nvarchar(4000),\n\t\t[status] nvarchar(4000),\n\t\t[priority] nvarchar(4000),\n\t\t[resolution] nvarchar(4000),\n\t\t[work_log] nvarchar(4000),\n\t\t[business_criticality] nvarchar(4000),\n\t\t[date_modified] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_bdc_entity.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n-- v_data_flow\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_data_flow')\n\tCREATE EXTERNAL TABLE v_data_flow (\n\t\t[data_flow_id] nvarchar(4000),\n\t\t[data_flow_name] nvarchar(4000),\n\t\t[information_owner_c] nvarchar(4000),\n\t\t[information_expert_c] nvarchar(4000),\n\t\t[fk_bdc_ent_source_id] nvarchar(4000),\n\t\t[fk_bdc_ent_dest_id] nvarchar(4000),\n\t\t[fk_int_id] nvarchar(4000),\n\t\t[fk_info_asset_source_id] nvarchar(4000),\n\t\t[fk_info_asset_dest_id] nvarchar(4000),\n\t\t[date_modified] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_data_flow.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n-- v_dpia\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_dpia')\n\tCREATE EXTERNAL TABLE v_dpia (\n\t\t[dpia_id] nvarchar(4000),\n\t\t[dpia_name] nvarchar(4000),\n\t\t[pm_c] nvarchar(4000),\n\t\t[contract_owner] nvarchar(4000),\n\t\t[organisation_areas_c] nvarchar(4000),\n\t\t[link_draft_dpia_c] nvarchar(4000),\n\t\t[date_registered_] nvarchar(4000),\n\t\t[date_to_mhclg_c] nvarchar(4000),\n\t\t[date_to_welsh_gov_c] nvarchar(4000),\n\t\t[date_returned_by_mhclg_c] nvarchar(4000),\n\t\t[date_returned_by_welsh_gov_c] nvarchar(4000),\n\t\t[date_returned_to_iao_pm_c] nvarchar(4000),\n\t\t[date_dpia_completed_c] nvarchar(4000),\n\t\t[date_signed_off_at_risk_c] nvarchar(4000),\n\t\t[date_iao_accepted_risks_c] nvarchar(4000),\n\t\t[review_period] nvarchar(4000),\n\t\t[last_current_and_accurate_date] nvarchar(4000),\n\t\t[dpia_num_container_c] nvarchar(4000),\n\t\t[date_to_sdpm] nvarchar(4000),\n\t\t[residual_risks] nvarchar(4000),\n\t\t[disagreement] nvarchar(4000),\n\t\t[io_decision_outcome] nvarchar(4000),\n\t\t[io_screening_outcome] nvarchar(4000),\n\t\t[dpia_controlled_document_c] nvarchar(4000),\n\t\t[date_of_next_review_c] nvarchar(4000),\n\t\t[date_implementation_reqs_com_c] nvarchar(4000),\n\t\t[information_owner_c] nvarchar(4000),\n\t\t[information_expert_c] nvarchar(4000),\n\t\t[pers_resp_implementation] nvarchar(4000),\n\t\t[status] nvarchar(4000),\n\t\t[date_modified] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_dpia.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n-- v_dsa\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_dsa')\n\tCREATE EXTERNAL TABLE v_dsa (\n\t\t[dsa_id] nvarchar(4000),\n\t\t[dsa_name] nvarchar(4000),\n\t\t[type] nvarchar(4000),\n\t\t[status] nvarchar(4000),\n\t\t[priority] nvarchar(4000),\n\t\t[data_being_shared_c] nvarchar(4000),\n\t\t[direction_c] nvarchar(4000),\n\t\t[why_shared_c] nvarchar(4000),\n\t\t[how_shared_securely_c] nvarchar(4000),\n\t\t[how_stored_securely_c] nvarchar(4000),\n\t\t[frequency_c] nvarchar(4000),\n\t\t[lawful_basis_c] nvarchar(4000),\n\t\t[personal_data_c] nvarchar(4000),\n\t\t[special_category_data_c] nvarchar(4000),\n\t\t[special_category_basis_c] nvarchar(4000),\n\t\t[retention_c] nvarchar(4000),\n\t\t[destruction_c] nvarchar(4000),\n\t\t[who_will_have_access_c] nvarchar(4000),\n\t\t[transfers_outside_of_uk_c] nvarchar(4000),\n\t\t[data_sharing_num_container_c] nvarchar(4000),\n\t\t[help] nvarchar(4000),\n\t\t[data_discloser_c] nvarchar(4000),\n\t\t[data_receiver_c] nvarchar(4000),\n\t\t[dsa_schedules] nvarchar(4000),\n\t\t[documents_ims_data_sharing_1_name] nvarchar(4000),\n\t\t[controllership_type_c] nvarchar(4000),\n\t\t[date_of_next_review_c] nvarchar(4000),\n\t\t[end_date_c] nvarchar(4000),\n\t\t[party_1_c] nvarchar(4000),\n\t\t[party_3_c] nvarchar(4000),\n\t\t[party_2_contact_c] nvarchar(4000),\n\t\t[personal_data_shared_c] nvarchar(4000),\n\t\t[special_category_data_shared_c] nvarchar(4000),\n\t\t[start_date_c] nvarchar(4000),\n\t\t[information_owner_c] nvarchar(4000),\n\t\t[information_expert_c] nvarchar(4000),\n\t\t[last_current_and_accurate_d_c] nvarchar(4000),\n\t\t[party_2_c] nvarchar(4000),\n\t\t[party_1_contact_c] nvarchar(4000),\n\t\t[party_3_contact_c] nvarchar(4000),\n\t\t[planning_legislation_c] nvarchar(4000),\n\t\t[third_party_recipients_c] nvarchar(4000),\n\t\t[review_period_c] nvarchar(4000),\n\t\t[date_modified] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_dsa.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n-- v_information_asset\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_information_asset')\n\tCREATE EXTERNAL TABLE v_information_asset (\n\t\t[information_asset_id] nvarchar(4000),\n\t\t[information_asset_parent_id] nvarchar(4000),\n\t\t[information_asset_name] nvarchar(4000),\n\t\t[primary_business_area] nvarchar(4000),\n\t\t[location] nvarchar(4000),\n\t\t[is_contracted_service] nvarchar(4000),\n\t\t[region] nvarchar(4000),\n\t\t[purpose] nvarchar(4000),\n\t\t[financial_value] nvarchar(4000),\n\t\t[business_criticality] nvarchar(4000),\n\t\t[data_disposal_routine] nvarchar(4000),\n\t\t[last_current_and_accurate_date] nvarchar(4000),\n\t\t[review_period_days] nvarchar(4000),\n\t\t[user_licences] nvarchar(4000),\n\t\t[superuser_licences] nvarchar(4000),\n\t\t[sys_admin_licences] nvarchar(4000),\n\t\t[infosec_risk_register] nvarchar(4000),\n\t\t[date_of_last_dr_check] nvarchar(4000),\n\t\t[backup_location] nvarchar(4000),\n\t\t[dr_check_frequency] nvarchar(4000),\n\t\t[backup_frequency] nvarchar(4000),\n\t\t[asset_format_list_c] nvarchar(4000),\n\t\t[management_register_text] nvarchar(4000),\n\t\t[software_version] nvarchar(4000),\n\t\t[access_control_method] nvarchar(4000),\n\t\t[backup_required] nvarchar(4000),\n\t\t[decommision_date] nvarchar(4000),\n\t\t[dr_test_required] nvarchar(4000),\n\t\t[encryption_at_rest] nvarchar(4000),\n\t\t[ims_information_assets_ims_information_assets_1_name] nvarchar(4000),\n\t\t[ims_inform2f55_assets_ida] nvarchar(4000),\n\t\t[status] nvarchar(4000),\n\t\t[date_modified] nvarchar(4000),\n\t\t[date_of_next_review] nvarchar(4000),\n\t\t[product_manager_or_business_owner] nvarchar(4000),\n\t\t[risk_assessment_type] nvarchar(4000),\n\t\t[link_to_risk_assessment] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_information_asset.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n-- v_integration\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_integration')\n\tCREATE EXTERNAL TABLE v_integration (\n\t\t[integration_id] nvarchar(4000),\n\t\t[integration_name] nvarchar(4000),\n\t\t[ims_integration_number] nvarchar(4000),\n\t\t[status] nvarchar(4000),\n\t\t[priority] nvarchar(4000),\n\t\t[commission_date_c] nvarchar(4000),\n\t\t[decommission_date_c] nvarchar(4000),\n\t\t[frequency_c] nvarchar(4000),\n\t\t[internal_external_c] nvarchar(4000),\n\t\t[encryption_in_transit] nvarchar(4000),\n\t\t[date_modified] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_integration.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n-- v_integration_dpia\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_integration_dpia')\n\tCREATE EXTERNAL TABLE v_integration_dpia (\n\t\t[int_id] nvarchar(4000),\n\t\t[dpia_id] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_integration_dpia.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n-- v_integration_dsa\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_integration_dsa')\n\tCREATE EXTERNAL TABLE v_integration_dsa (\n\t\t[int_id] nvarchar(4000),\n\t\t[dsa_id] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_integration_dsa.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n-- v_integration_ropa\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_integration_ropa')\n\tCREATE EXTERNAL TABLE v_integration_ropa (\n\t\t[int_id] nvarchar(4000),\n\t\t[ropa_id] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_integration_ropa.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n-- v_master_data_map\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_master_data_map')\n\tCREATE EXTERNAL TABLE v_master_data_map (\n\t\t[master_data_map_id] nvarchar(4000),\n\t\t[master_data_map_name] nvarchar(4000),\n\t\t[is_master_data] nvarchar(4000),\n\t\t[mdm_information_owner] nvarchar(4000),\n\t\t[mdm_information_expert] nvarchar(4000),\n\t\t[volume_of_records] nvarchar(4000),\n\t\t[type] nvarchar(4000),\n\t\t[status] nvarchar(4000),\n\t\t[priority] nvarchar(4000),\n\t\t[resolution] nvarchar(4000),\n\t\t[work_log] nvarchar(4000),\n\t\t[fk_attribute_id] nvarchar(4000),\n\t\t[fk_asset_id] nvarchar(4000),\n\t\t[date_modified] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_master_data_map.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n-- v_ropa\nIF NOT EXISTS (SELECT * FROM sys.external_tables WHERE name = 'v_ropa')\n\tCREATE EXTERNAL TABLE v_ropa (\n\t\t[ropa_id] nvarchar(4000),\n\t\t[ropa_name] nvarchar(4000),\n\t\t[type] nvarchar(4000),\n\t\t[status] nvarchar(4000),\n\t\t[priority] nvarchar(4000),\n\t\t[organisation_areas_c] nvarchar(4000),\n\t\t[data_controllers_c] nvarchar(4000),\n\t\t[joint_controller_c] nvarchar(4000),\n\t\t[categories_of_personal_data_c] nvarchar(4000),\n\t\t[categories_of_recipients_c] nvarchar(4000),\n\t\t[security_measures_c] nvarchar(4000),\n\t\t[third_country_names_c] nvarchar(4000),\n\t\t[third_country_safeguards_c] nvarchar(4000),\n\t\t[legitimate_interest_c] nvarchar(4000),\n\t\t[automated_decision_making_c] nvarchar(4000),\n\t\t[data_source_c] nvarchar(4000),\n\t\t[records_of_consent_c] nvarchar(4000),\n\t\t[location_of_data_c] nvarchar(4000),\n\t\t[dpia_required_c] nvarchar(4000),\n\t\t[dpia_status_c] nvarchar(4000),\n\t\t[retention_policy_c] nvarchar(4000),\n\t\t[retention_policy_applied_c] nvarchar(4000),\n\t\t[data_breach_record_c] nvarchar(4000),\n\t\t[retention_not_adhered_c] nvarchar(4000),\n\t\t[privacy_notice_c] nvarchar(4000),\n\t\t[categories_of_individuals_c] nvarchar(4000),\n\t\t[retention_schedule] nvarchar(4000),\n\t\t[business_function] nvarchar(4000),\n\t\t[dpo] nvarchar(4000),\n\t\t[data_breach_occurred_c] nvarchar(4000),\n\t\t[last_current_and_accurate_da_c] nvarchar(4000),\n\t\t[gdpr_lawful_basis_ms_c] nvarchar(4000),\n\t\t[gdpr_special_cat_condition_m_c] nvarchar(4000),\n\t\t[dpa_2018_sch1_condition_ms_c] nvarchar(4000),\n\t\t[business_function_unstructured] nvarchar(4000),\n\t\t[bdc_entity_temp_c] nvarchar(4000),\n\t\t[cat_of_individuals_temp_c] nvarchar(4000),\n\t\t[ims_ropa_documents] nvarchar(4000),\n\t\t[estimated_number_of_operator_c] nvarchar(4000),\n\t\t[information_owner_c] nvarchar(4000),\n\t\t[information_expert_c] nvarchar(4000),\n\t\t[date_modified] nvarchar(4000)\n\t\t)\n\t\tWITH (\n\t\tLOCATION = 'ims/v_ropa.parquet',\n\t\tDATA_SOURCE = [odw-curated_pinsodwdatadevstorage_dfs_core_windows_net],\n\t\tFILE_FORMAT = [SynapseParquetFormat]\n\t\t)\nGO\n\n",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "odw_reporting_db",
				"poolName": "Built-in"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}