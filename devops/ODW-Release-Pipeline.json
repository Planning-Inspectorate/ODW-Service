{"source":2,"revision":14,"description":null,"createdBy":{"displayName":"Hamish Pollock","url":"https://spsproduks1.vssps.visualstudio.com/A61cd0314-43af-4a02-b891-162f90a8aa59/_apis/Identities/f3bfbcc8-a98d-6432-831e-3906647a6da6","_links":{"avatar":{"href":"https://dev.azure.com/planninginspectorate/_apis/GraphProfile/MemberAvatars/aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2"}},"id":"f3bfbcc8-a98d-6432-831e-3906647a6da6","uniqueName":"Hamish.Pollock@planninginspectorate.gov.uk","imageUrl":"https://dev.azure.com/planninginspectorate/_apis/GraphProfile/MemberAvatars/aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2","descriptor":"aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2"},"createdOn":"2022-03-03T12:38:23.643Z","modifiedBy":{"displayName":"Hamish Pollock","url":"https://spsproduks1.vssps.visualstudio.com/A61cd0314-43af-4a02-b891-162f90a8aa59/_apis/Identities/f3bfbcc8-a98d-6432-831e-3906647a6da6","_links":{"avatar":{"href":"https://dev.azure.com/planninginspectorate/_apis/GraphProfile/MemberAvatars/aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2"}},"id":"f3bfbcc8-a98d-6432-831e-3906647a6da6","uniqueName":"Hamish.Pollock@planninginspectorate.gov.uk","imageUrl":"https://dev.azure.com/planninginspectorate/_apis/GraphProfile/MemberAvatars/aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2","descriptor":"aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2"},"modifiedOn":"2022-03-22T10:51:58.650Z","isDeleted":false,"lastRelease":{"id":26,"name":"Release-26","artifacts":[],"_links":{},"description":"Triggered by Planning-Inspectorate.ODW-Service 20220322.1.","releaseDefinition":{"id":1,"projectReference":null,"_links":{}},"createdOn":"2022-03-22T10:52:43.003Z","createdBy":{"displayName":"Hamish Pollock","url":"https://spsproduks1.vssps.visualstudio.com/A61cd0314-43af-4a02-b891-162f90a8aa59/_apis/Identities/f3bfbcc8-a98d-6432-831e-3906647a6da6","_links":{"avatar":{"href":"https://dev.azure.com/planninginspectorate/_apis/GraphProfile/MemberAvatars/aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2"}},"id":"f3bfbcc8-a98d-6432-831e-3906647a6da6","uniqueName":"Hamish.Pollock@planninginspectorate.gov.uk","imageUrl":"https://dev.azure.com/planninginspectorate/_apis/GraphProfile/MemberAvatars/aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2","descriptor":"aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2"}},"variables":{},"variableGroups":[],"environments":[{"id":1,"name":"Preprod Infrastructure","rank":1,"owner":{"displayName":"Hamish Pollock","url":"https://spsproduks1.vssps.visualstudio.com/A61cd0314-43af-4a02-b891-162f90a8aa59/_apis/Identities/f3bfbcc8-a98d-6432-831e-3906647a6da6","_links":{"avatar":{"href":"https://dev.azure.com/planninginspectorate/_apis/GraphProfile/MemberAvatars/aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2"}},"id":"f3bfbcc8-a98d-6432-831e-3906647a6da6","uniqueName":"Hamish.Pollock@planninginspectorate.gov.uk","imageUrl":"https://dev.azure.com/planninginspectorate/_apis/GraphProfile/MemberAvatars/aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2","descriptor":"aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2"},"variables":{},"variableGroups":[4],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":1}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":2},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":3}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"ubuntu-latest"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":210,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"5.*","name":"Replace tokens in **/*.tf","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"rootDirectory":"$(System.DefaultWorkingDirectory)/_Planning-Inspectorate.ODW-Service/terraform_templates","targetFiles":"**/*.tf","encoding":"auto","tokenPattern":"rm","tokenPrefix":"__","tokenSuffix":"}#","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","actionOnNoFiles":"continue","enableTransforms":"false","transformPrefix":"(","transformSuffix":")","variableFiles":"","inlineVariables":"","variableSeparator":".","enableRecursion":"false","useLegacyPattern":"false","useLegacyEmptyFeature":"true","useDefaultValue":"false","emptyValue":"(empty)","defaultValue":"","enableTelemetry":"true"}},{"environment":{},"taskId":"a4789e5d-f6e8-431f-add9-379d640a883c","version":"0.*","name":"Install Terraform latest","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"terraformVersion":"latest"}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"2.*","name":"Terraform : init","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"init","workingDirectory":"$(System.DefaultWorkingDirectory)/_Planning-Inspectorate.ODW-Service/terraform_templates","commandOptions":"","environmentServiceNameAzureRM":"","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"887dee62-1b29-4937-b181-9ff5aabe4926","backendAzureRmResourceGroupName":"pins-odw-terraform-rg","backendAzureRmStorageAccountName":"pinsodwterraformstorage","backendAzureRmContainerName":"odw-terraform","backendAzureRmKey":"odw-preprod.tfstate","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"2.*","name":"Terraform : plan","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"plan","workingDirectory":"$(System.DefaultWorkingDirectory)/_Planning-Inspectorate.ODW-Service/terraform_templates","commandOptions":"","environmentServiceNameAzureRM":"d18d111a-881e-4d56-b1f4-ef5d3bbe24d8","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"887dee62-1b29-4937-b181-9ff5aabe4926","backendAzureRmResourceGroupName":"pins-odw-data-dev-rg","backendAzureRmStorageAccountName":"pinsodwdatadevstorage","backendAzureRmContainerName":"odw-terraform","backendAzureRmKey":"terraform.tfstate","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"2.*","name":"Terraform : validate and apply","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"apply","workingDirectory":"$(System.DefaultWorkingDirectory)/_Planning-Inspectorate.ODW-Service/terraform_templates","commandOptions":"-auto-approve","environmentServiceNameAzureRM":"d18d111a-881e-4d56-b1f4-ef5d3bbe24d8","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"887dee62-1b29-4937-b181-9ff5aabe4926","backendAzureRmResourceGroupName":"pins-odw-data-dev-rg","backendAzureRmStorageAccountName":"pinsodwdatadevstorage","backendAzureRmContainerName":"odw-terraform","backendAzureRmKey":"terraform.tfstate","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":26,"url":"https://vsrm.dev.azure.com/planninginspectorate/f393e903-400c-40d0-b6c0-10289f361c4f/_apis/Release/releases/26","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/planninginspectorate/_apis/public/Release/badge/f393e903-400c-40d0-b6c0-10289f361c4f/1/1"},{"id":2,"name":"Preprod Artifacts","rank":2,"owner":{"displayName":"Hamish Pollock","url":"https://spsproduks1.vssps.visualstudio.com/A61cd0314-43af-4a02-b891-162f90a8aa59/_apis/Identities/f3bfbcc8-a98d-6432-831e-3906647a6da6","_links":{"avatar":{"href":"https://dev.azure.com/planninginspectorate/_apis/GraphProfile/MemberAvatars/aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2"}},"id":"f3bfbcc8-a98d-6432-831e-3906647a6da6","uniqueName":"Hamish.Pollock@planninginspectorate.gov.uk","imageUrl":"https://dev.azure.com/planninginspectorate/_apis/GraphProfile/MemberAvatars/aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2","descriptor":"aad.ZjNiZmJjYzgtYTk4ZC03NDMyLTgzMWUtMzkwNjY0N2E2ZGE2"},"variables":{},"variableGroups":[4],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":4}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":5},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":6}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"ubuntu-latest"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":210,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"54eb06e9-7448-4577-b024-0b06c77cf953","version":"2.*","name":"Toggle Azure Synapse Triggers - OFF","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ServiceConnectionName":"d18d111a-881e-4d56-b1f4-ef5d3bbe24d8","ResourceGroupName":"pins-odw-data-preprod-rg","WorkspaceName":"pins-odw-data-preprod-syn-ws","ToggleOn":"false","Triggers":"*","Continue":"false","Debug":"false"}},{"environment":{},"taskId":"51060321-a461-4140-9787-1b28345a576d","version":"1.*","name":"Synapse deployment task for workspace: pins-odw-data-preprod-syn-ws","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"TemplateFile":"$(System.DefaultWorkingDirectory)/_Planning-Inspectorate.ODW-Service/workspace_arm_templates/TemplateForWorkspace.json","ParametersFile":"$(System.DefaultWorkingDirectory)/_Planning-Inspectorate.ODW-Service/workspace_arm_templates/TemplateParametersForWorkspace.json","AzureResourceManagerConnection":"d18d111a-881e-4d56-b1f4-ef5d3bbe24d8","ResourceGroupName":"pins-odw-data-preprod-rg","TargetWorkspaceName":"pins-odw-data-preprod-syn-ws","DeleteArtifactsNotInTemplate":"true","OverrideArmParameters":"-workspaceName $(synapse_workspace_name) -ls_kv_properties_typeProperties_baseUrl https://$(synapse_workspace_name).vault.azure.net/ -pins-odw-data-dev-syn-ws-WorkspaceDefaultStorage_properties_typeProperties_url https://$(storage_account_name).dfs.core.windows.net","Environment":"prod"}},{"environment":{},"taskId":"54eb06e9-7448-4577-b024-0b06c77cf953","version":"2.*","name":"Toggle Azure Synapse Triggers copy - ON","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ServiceConnectionName":"d18d111a-881e-4d56-b1f4-ef5d3bbe24d8","ResourceGroupName":"pins-odw-data-preprod-rg","WorkspaceName":"pins-odw-data-preprod-syn-ws","ToggleOn":"true","Triggers":"*","Continue":"false","Debug":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"Preprod Infrastructure","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":26,"url":"https://vsrm.dev.azure.com/planninginspectorate/f393e903-400c-40d0-b6c0-10289f361c4f/_apis/Release/releases/26","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/planninginspectorate/_apis/public/Release/badge/f393e903-400c-40d0-b6c0-10289f361c4f/1/2"}],"artifacts":[{"sourceId":"f393e903-400c-40d0-b6c0-10289f361c4f:86","type":"Build","alias":"_Planning-Inspectorate.ODW-Service","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://dev.azure.com/planninginspectorate/_permalink/_build/index?collectionId=a592806d-cb66-469b-8fb6-2e8234badd7a&projectId=f393e903-400c-40d0-b6c0-10289f361c4f&definitionId=86","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"86","name":"Planning-Inspectorate.ODW-Service"},"definitions":{"id":"","name":""},"IsMultiDefinitionType":{"id":"False","name":"False"},"project":{"id":"f393e903-400c-40d0-b6c0-10289f361c4f","name":"operational-data-warehouse"},"repository":{"id":"","name":""}},"isPrimary":true,"isRetained":false}],"triggers":[{"artifactAlias":"_Planning-Inspectorate.ODW-Service","triggerConditions":[],"triggerType":1}],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"ReleaseNew"},"IntegrateBoardsWorkItems":{"$type":"System.String","$value":"False"},"IntegrateJiraWorkItems":{"$type":"System.String","$value":"false"}},"id":1,"name":"ODW-Release-Pipeline","path":"\\","projectReference":null,"url":"https://vsrm.dev.azure.com/planninginspectorate/f393e903-400c-40d0-b6c0-10289f361c4f/_apis/Release/definitions/1","_links":{"self":{"href":"https://vsrm.dev.azure.com/planninginspectorate/f393e903-400c-40d0-b6c0-10289f361c4f/_apis/Release/definitions/1"},"web":{"href":"https://dev.azure.com/planninginspectorate/f393e903-400c-40d0-b6c0-10289f361c4f/_release?definitionId=1"}}}