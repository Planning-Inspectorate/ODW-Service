name: Data Validation Dev

# This is the nightly data validation pipeline against the dev environment
# Runs the pln_master_test Synapse pipeline for end-to-end testing

# Automatically run against the main branch at a set time every day
trigger: none
pr: none
schedules:
- cron: '0 20 * * 1-5' # cron syntax defining a schedule. At 8pm every week day
  displayName: Daily main branch run against the dev env
  branches:
    include:
    - main
  always: true
  batch: false

variables:
- name: env
  value: dev
- group: "Terraform Dev"

stages:
- template: stages/run-e2e-pipeline-stage.yaml
  parameters:
    agentPool: 'pins-agent-pool-odw-${{ variables.env }}-uks'
    env: ${{ variables.env }}
    pipelineName: 'pln_master_test'
