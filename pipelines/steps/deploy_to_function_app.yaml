parameters:
  - name: environment
    type: string

  - name: armServiceConnectionName
    type: string

  - name: resourceGroup
    type: string

  - name: functionApp
    type: string

  - name: zipFile
    type: string

steps:
- task: AzureCLI@2
  displayName: 'Deploy to function app'
  inputs:
    azureSubscription: '$(armServiceConnectionName)'
    scriptType: 'bash'
    scriptLocation: 'inlineScript'
    inlineScript: |
      az functionapp deployment source config-zip \
      --resource-group $(resourceGroup) \
      --name $(functionApp) \
      --src $(zipFile) \
      --build-remote true
